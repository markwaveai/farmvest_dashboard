{"openapi":"3.1.0","info":{"title":"Animal Management API","version":"0.1.0"},"paths":{"/health_status":{"get":{"summary":"Health Status","operationId":"health_status_health_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/auth/static_login":{"post":{"tags":["Auth"],"summary":"Static Login","description":"Authenticate user using a static OTP (123456) for testing or specific scenarios.","operationId":"static_login_api_auth_static_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OTPTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/auth/token":{"post":{"tags":["Auth"],"summary":"Login With Otp","description":"Authenticate user using a dynamically generated OTP.\n\nThis is the primary login endpoint. It verifies the OTP previously sent\nto the user's mobile device.\n\nArgs:\n    encrypted_api_key: Base64 encoded API key for authentication\n    db: Database session dependency\n    payload: OTPTokenRequest containing mobile_number and otp\n\nReturns:\n    dict: Access token details (access_token, token_type, roles)\n\nRaises:\n    HTTPException 401: If API key is invalid, mobile number not found, user deactivated, or OTP is invalid/expired\n    HTTPException 500: If token generation fails","operationId":"login_with_otp_api_auth_token_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OTPTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/api/auth/send-whatsapp-otp":{"post":{"tags":["Auth"],"summary":"Send OTP to WhatsApp using Periskope","description":"Generate and send a 6-digit OTP to the user's WhatsApp number.\n\nThis endpoint validates the mobile number, ensures the user is registered and active,\ngenerates a unique OTP, and sends it via Periskope WhatsApp API.\n\nArgs:\n    db: Database session dependency\n    encrypted_api_key: Base64 encoded API key for authentication\n    mobile: 10-digit Indian mobile number\n\nReturns:\n    dict: Success status and metadata including requested/expired times and user roles\n\nRaises:\n    HTTPException 401: If API key is invalid or Periskope authorization fails\n    HTTPException 403: If mobile number not registered or account deactivated\n    HTTPException 400: If OTP request limit (3) is reached or mobile format is invalid\n    HTTPException 500: For Periskope API or database failures","operationId":"send_whatsapp_otp_api_auth_send_whatsapp_otp_post","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"mobile","in":"query","required":true,"schema":{"type":"string","description":"Indian mobile number (10 digits)","title":"Mobile"},"description":"Indian mobile number (10 digits)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/animal/onboard_animal":{"post":{"tags":["Animal"],"summary":"Onboard Animal","description":"Onboard new animals with investor and investment details.\n\nThis endpoint creates or updates investor records, creates investment records,\nand onboards buffaloes and their calves. Animals are assigned to farms based on\nuser role: Admin must provide farm_id, while Farm Managers and Supervisors use\ntheir assigned farm.\n\nArgs:\n    request: AnimalCreateRequest containing:\n        - investor_details: Investor personal and KYC information\n        - investment_details: Investment and payment information\n        - animals: List of buffalo and calf details\n        - farm_id: Required for Admin users\n    user: Current authenticated user with role information\n    db: Database session dependency\n\nReturns:\n    dict: Response containing:\n        - message: Success message\n        - onboarded_animal_ids: List of animal IDs that were onboarded\n        - animals: List of animal details with RFID tags and images\n        - investor_name: Full name of the investor\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user role is not ADMIN, FARM_MANAGER, or SUPERVISOR\n    HTTPException 400: If Admin doesn't provide farm_id\n    HTTPException 404: If Farm Manager or Supervisor record not found\n    HTTPException 409: If RFID tag already exists\n    HTTPException 500: For internal server errors\n\nAuthorization:\n    - ADMIN: Must provide farm_id in request\n    - FARM_MANAGER: Uses their assigned farm_id\n    - SUPERVISOR: Uses their assigned farm_id","operationId":"onboard_animal_api_animal_onboard_animal_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnimalCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/animal/shed_allocation/{shed_id}":{"post":{"tags":["Animal"],"summary":"Allocate Animals","description":"Allocate animals to specific positions within a shed.\n\nThis endpoint assigns animals to specific parking positions (row and slot) within\na shed. It validates that positions are not already occupied and updates the shed's\nbuffalo count after allocation.\n\nArgs:\n    shed_id: The shed identifier where animals will be allocated\n    request: ShedAllocationRequest containing list of allocations with:\n        - rfid_tag_number: Animal's RFID tag\n        - row_number: Row number in the shed\n        - parking_id: Parking slot identifier\n    user: Current authenticated user with role information\n    db: Database session dependency\n\nReturns:\n    dict: Response containing:\n        - status: \"success\"\n        - message: Success message\n        - data:\n            - updated_count: Number of animals allocated\n            - shed_capacity_remaining: Remaining capacity in the shed\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user doesn't have access to the shed's farm\n    HTTPException 404: If shed or animal not found\n    HTTPException 400: If parking slot is already occupied\n    HTTPException 500: For internal server errors\n\nAuthorization:\n    - ADMIN: Can allocate to any shed\n    - FARM_MANAGER: Can only allocate in sheds within their farm\n    - SUPERVISOR: Can only allocate in sheds within their farm","operationId":"allocate_animals_api_animal_shed_allocation__shed_id__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"shed_id","in":"path","required":true,"schema":{"type":"integer","title":"Shed Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShedAllocationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/animal/unallocated_animals":{"get":{"tags":["Animal"],"summary":"Get Unallocated Animals","description":"Get all animals that have been onboarded but not yet allocated to a shed.\nReturns list of animal IDs (RFID tags) for animals where shed_id is NULL.\n\n- Admin: Sees all unallocated animals, or filtered by farm_id if provided\n- Farm Manager: Sees unallocated animals for their farm\n- Supervisor: Sees unallocated animals for their farm","operationId":"get_unallocated_animals_api_animal_unallocated_animals_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"farm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by farm (Admin only)","title":"Farm Id"},"description":"Filter by farm (Admin only)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/animal/search_animal":{"get":{"tags":["Animal"],"summary":"Search Animal","description":"Search for animals by RFID tag, ear tag, or animal ID.\n\nThis endpoint searches for animals based on RFID tag number, ear tag, or animal ID.\nReturns comprehensive details including animal information, shed details, farm details,\nand investor information. For ADMIN users, also includes farm manager and supervisor details.\n\nArgs:\n    user: Current authenticated user with role information\n    db: Database session dependency\n    query_str: Optional search query - can be RFID tag, ear tag, or animal ID.\n    health_status: Optional filter by health status\n    farm_id: Optional filter by farm ID\n\nReturns:\n    dict: Response containing:\n        - status: \"success\"\n        - count: Number of animals found\n        - data: List of animal results\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user role is not authorized or animal belongs to another farm\n    HTTPException 500: For internal server errors","operationId":"search_animal_api_animal_search_animal_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"query_str","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"RFID Tag Number or Ear Tag","title":"Query Str"},"description":"RFID Tag Number or Ear Tag"},{"name":"health_status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/AnimalHealthStatusEnum"},{"type":"null"}],"description":"Filter by health status","title":"Health Status"},"description":"Filter by health status"},{"name":"farm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by farm ID","title":"Farm Id"},"description":"Filter by farm ID"},{"name":"parking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by parking id","title":"Parking Id"},"description":"Filter by parking id"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/animal/get_total_animals":{"get":{"tags":["Animal"],"summary":"Get Total Animals","description":"Get total animals based on user role and optional filters.\n\n- ADMIN: Returns all animals if no filters provided. Can filter by farm_id and/or shed_id.\n- FARM_MANAGER: Returns animals from their assigned farm. Can filter by shed_id within their farm.\n                Raises error if farm_id provided doesn't belong to them.\n- SUPERVISOR: Same access as FARM_MANAGER - animals from their assigned farm with optional shed filter.","operationId":"get_total_animals_api_animal_get_total_animals_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"farm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by farm_id (optional)","title":"Farm Id"},"description":"Filter by farm_id (optional)"},{"name":"shed_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by shed_id (optional)","title":"Shed Id"},"description":"Filter by shed_id (optional)"},{"name":"health_status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/AnimalHealthStatusEnum"},{"type":"null"}],"description":"Filter by health status (optional)","title":"Health Status"},"description":"Filter by health status (optional)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/animal/get-position":{"get":{"tags":["Animal"],"summary":"Get Animal By Position","description":"Find which animal is located at a specific position in a shed.\n\nThis endpoint retrieves animal details based on their exact position within\na shed, specified by farm, shed, row number, and parking slot.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user with role information\n    farm_id: The farm identifier\n    shed_id: The shed identifier within the farm\n    row_number: Row number where the animal is located\n    parking_id: Parking slot identifier\n\nReturns:\n    dict: Response containing:\n        - status: \"success\"\n        - data:\n            - animal_details: Basic animal info\n            - investor_details: Details of the investor\n            - farm_manager_details: Primary manager of the farm\n            - supervisor_details: Supervisor assigned to the shed or farm\n\nRaises:\n    HTTPException 403: If user is not authorized to access the requested farm\n    HTTPException 404: If no animal found at the specified position\n    HTTPException 500: For internal server errors\n\nAuthorization:\n    - ADMIN: Can access any farm/shed position.\n    - FARM_MANAGER: Restricted to their assigned farm.\n    - SUPERVISOR: Restricted to their assigned farm.","operationId":"get_animal_by_position_api_animal_get_position_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"farm_id","in":"query","required":true,"schema":{"type":"integer","title":"Farm Id"}},{"name":"shed_id","in":"query","required":true,"schema":{"type":"integer","title":"Shed Id"}},{"name":"row_number","in":"query","required":true,"schema":{"type":"string","title":"Row Number"}},{"name":"parking_id","in":"query","required":true,"schema":{"type":"string","title":"Parking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/animal/get_calves":{"get":{"tags":["Animal"],"summary":"Get Calves","description":"Get calves associated with a specific parent buffalo (identified by Animal ID).\n\nArgs:\n    animal_id: The Animal ID of the parent animal.\n\nReturns:\n    List of animals (calves) linked to this parent.","operationId":"get_calves_api_animal_get_calves_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"animal_id","in":"query","required":true,"schema":{"type":"string","description":"Animal ID of the parent buffalo","title":"Animal Id"},"description":"Animal ID of the parent buffalo"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/employee/create_employee":{"post":{"tags":["Employee"],"summary":"Create Employee","description":"Create a new employee or assign professional roles to an existing user.\n\nThis endpoint supports creating Supervisors, Farm Managers, Doctors, and Assistant Doctors.\nIt enforces complex authorization logic: Admins can create any role (except Investor),\nwhile Farm Managers can only create certain roles for their own farm.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    employee_request: EmployeeCreateRequest containing profile and role details\n\nReturns:\n    dict: Success message with created employee ID and assigned roles\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user lacks permission or attempts to create forbidden roles\n    HTTPException 404: If farm or shed does not exist\n    HTTPException 400: If senior doctor is missing for an assistant doctor, or user already has an employee role\n    HTTPException 500: For internal server errors during creation\n\nAuthorization:\n    - ADMIN: Can create any employee role.\n    - FARM_MANAGER: Can only create Supervisors, Doctors, or Assistant Doctors for their own farm.","operationId":"create_employee_api_employee_create_employee_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmployeeCreateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/employee/get_all_employees":{"get":{"tags":["Employee"],"summary":"Get All Employees","description":"Retrieve a paginated list of employees based on user role and filters.\n\nAdmins can see all employees. Farm Managers and Supervisors are restricted to seeing\nemployees assigned to their respective farms.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    role: Optional filter by specific RoleEnum (e.g., SUPERVISOR)\n    sort_by: Optional sorting (1 for Ascending ID, 2 for Descending ID)\n    page: Page number (starts from 1)\n    size: Number of records per page\n\nReturns:\n    dict: Paginated response containing success message, employee data list, and pagination metadata\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user role is not authorized or farm assignment is missing\n    HTTPException 404: If manager/supervisor record is not found in database\n    HTTPException 500: For unexpected database or logic errors\n\nAuthorization:\n    - ADMIN: Full access.\n    - FARM_MANAGER: Access to all employees in their farm.\n    - SUPERVISOR: Access to Supervisors/Doctors/Assistant Doctors in their farm.","operationId":"get_all_employees_api_employee_get_all_employees_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RoleEnum"},{"type":"null"}],"description":"Role of the employee","title":"Role"},"description":"Role of the employee"},{"name":"farm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Farm ID of the employee","title":"Farm Id"},"description":"Farm ID of the employee"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},{"name":"sort_by","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Sort By"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":20,"title":"Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/employee/get_employee_details_by_id":{"get":{"tags":["Employee"],"summary":"Get Employee Details By Id","description":"Fetch comprehensive profile and role-specific details for a single employee.\n\nReturns standard user info plus detailed associations based on their role\n(e.g., farm manager locations, supervisor shed/farm info, doctor assistant list).\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    user_id: The unique ID of the employee to fetch\n\nReturns:\n    dict: Success status and detailed employee object including role-specific nested data\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not an Admin\n    HTTPException 404: If the target user_id is not found or inactive\n    HTTPException 500: For internal server errors\n\nAuthorization:\n    - ADMIN ONLY.","operationId":"get_employee_details_by_id_api_employee_get_employee_details_by_id_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","exclusiveMinimum":0,"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/employee/search_employee":{"get":{"tags":["Employee"],"summary":"Search Employee","description":"Search for employees by name, email, or mobile number with filters.\n\nSearches across active employees. Results are scoped by the requester's role:\nAdmin can search everyone, while others are restricted to their farm.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    query_str: Text string to match against first name, last name, email, or mobile\n    role: Optional RoleEnum to filter results\n    sort_by: Optional sorting (1 for Ascending ID, 2 for Descending ID)\n    page: Page number\n    size: Results per page\n\nReturns:\n    dict: SUCCESSFUL status with paginated list of matching employee brief profiles\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user role is unauthorized or farm assignment missing\n    HTTPException 400: If sort_by value is invalid\n    HTTPException 500: For server errors\n\nAuthorization:\n    - ADMIN: Global search.\n    - FARM_MANAGER/SUPERVISOR: Farm-restricted search.","operationId":"search_employee_api_employee_search_employee_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"query_str","in":"query","required":true,"schema":{"type":"string","description":"Employee name, email or phone number","title":"Query Str"},"description":"Employee name, email or phone number"},{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RoleEnum"},{"type":"null"}],"description":"Role of the employee","title":"Role"},"description":"Role of the employee"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},{"name":"sort_by","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"1 = asc, 2 = desc","title":"Sort By"},"description":"1 = asc, 2 = desc"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":20,"title":"Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/employee/update_employee":{"put":{"tags":["Employee"],"summary":"Update Employee","description":"Update employee's farm or shed assignment.\n\nThis endpoint allows Admin and Farm Manager to update employee assignments:\n- Admin can update Farm Managers (farm assignment) and Supervisors (farm + shed assignment)\n- Farm Manager can only update Supervisors within their own farm\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    request: EmployeeUpdateRequest containing user_id, role, farm_id, and optional shed_id\n\nReturns:\n    dict: Success message with updated employee details\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user lacks permission or tries to update outside their farm\n    HTTPException 404: If employee record not found or shed/farm doesn't exist\n    HTTPException 400: If validation fails (e.g., shed doesn't belong to farm)\n    HTTPException 500: For internal server errors\n\nAuthorization:\n    - ADMIN: Can update any Farm Manager or Supervisor\n    - FARM_MANAGER: Can only update Supervisors in their own farm","operationId":"update_employee_api_employee_update_employee_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmployeeUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/farm/farm":{"post":{"tags":["Farms"],"summary":"Create Farm","description":"Register a new farm in the system.\n\nThis endpoint allows administrators to create a new farm by providing its name and location.\nIt ensures that farm names are unique across the system.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    location: geographic region where the farm is situated (FarmLocationEnum)\n    farm_name: Unique name for the farm (3-100 characters)\n    is_test: Flag to indicate if this is a test/staging farm record\n\nReturns:\n    dict: Success message with the newly created farm's basic details (ID, name, location)\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not an Admin\n    HTTPException 400: If a farm with the same name already exists\n    HTTPException 500: For database or server-side errors\n\nAuthorization:\n    - ADMIN ONLY.","operationId":"create_farm_api_farm_farm_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_create_farm_api_farm_farm_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/farm/get_all_farms":{"get":{"tags":["Farms"],"summary":"Get All Farms","description":"Retrieve a list of all farms with optional filtering and pagination.\n\nAdmins can view all farms, while Farm Managers only see their assigned farm.\nResults include summary details like manager info, shed list, and total animal count.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    name: Optional partial match filter for farm name\n    location: Optional filter by farm location (FarmLocationEnum)\n    sort_by: Sorting preference (1 for Ascending ID, 2 for Descending ID)\n    page: Current page number\n    size: Records per page\n\nReturns:\n    dict: Paginated list of farms with nested manager, sheds, and buffalo count data\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user lacks permission (Investor or other restricted roles)\n    HTTPException 400: If sort_by value is invalid\n    HTTPException 500: For database errors\n\nAuthorization:\n    - ADMIN: Full access to all farms.\n    - FARM_MANAGER: Restricted to the farm they manage.","operationId":"get_all_farms_api_farm_get_all_farms_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter farms by name","title":"Name"},"description":"Filter farms by name"},{"name":"location","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/FarmLocationEnum"},{"type":"null"}],"description":"Filter farms by location","title":"Location"},"description":"Filter farms by location"},{"name":"sort_by","in":"query","required":false,"schema":{"type":"integer","description":"1 = asc, 2 = desc","default":1,"title":"Sort By"},"description":"1 = asc, 2 = desc"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":20,"title":"Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/farm/farm/details":{"get":{"tags":["Farms"],"summary":"Get Farm Details","description":"Fetch comprehensive details for a specific farm.\n\nReturns farm profile, manager's professional profile, and a list of all sheds\nassociated with the farm.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    farm_id: The ID of the farm to retrieve (required for Admin, defaults to self for FM/Supervisor)\n\nReturns:\n    dict: Detailed farm object including manager details and shed summaries\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not authorized for the farm or role is invalid\n    HTTPException 400: If farm_id is missing for Admin\n    HTTPException 404: If the farm or corresponding manager/supervisor profile not found\n    HTTPException 500: For logic or database errors\n\nAuthorization:\n    - ADMIN: Can view any farm (must provide farm_id).\n    - FARM_MANAGER: Restricted to their assigned farm.\n    - SUPERVISOR: Restricted to their assigned farm.","operationId":"get_farm_details_api_farm_farm_details_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"farm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","exclusiveMinimum":0},{"type":"null"}],"description":"Farm ID must be greater than 0","title":"Farm Id"},"description":"Farm ID must be greater than 0"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/farm/staff":{"get":{"tags":["Farms"],"summary":"Get Farm Staff","description":"Fetch all operational staff (Supervisors, Doctors, Assistant Doctors) linked to a farm.\n\n- **Admin**: Must provide `farm_id` as a query parameter.\n- **Farm Manager / Supervisor**: `farm_id` is automatically resolved from their token/profile.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    farm_id: Optional ID of the farm (required for Admin)\n\nReturns:\n    dict: Success status with categorised staff lists (supervisors, doctors, assistant_doctors)\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 400: If Admin does not provide farm_id\n    HTTPException 403: If user is unauthorized or not linked to the requested farm\n    HTTPException 404: If user profile or farm record is missing\n    HTTPException 500: For database errors\n\nAuthorization:\n    - ADMIN: Can view any farm's staff.\n    - FARM_MANAGER or SUPERVISOR: Restricted to their assigned farm's staff.","operationId":"get_farm_staff_api_farm_staff_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"farm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Farm ID (Required for Admin)","title":"Farm Id"},"description":"Farm ID (Required for Admin)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/farm/investor/farms":{"get":{"tags":["Farms"],"summary":"Get Investor Farms","description":"Retrieve all farms where the logged-in investor has allocated animals.\n\nThis endpoint filters farms based on animal allocations for the specific investor.\nIt returns farm metadata along with the total count of buffaloes owned by the investor at each location.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n\nReturns:\n    dict: List of farms with details (ID, name, location) and animal counts\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not an Investor\n    HTTPException 404: If investor record not found\n    HTTPException 500: For retrieval errors","operationId":"get_investor_farms_api_farm_investor_farms_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/farm/locations":{"get":{"tags":["Farms"],"summary":"Get Farm Locations","description":"Get all available farm locations from FarmLocationEnum.\n\nThis is a public endpoint that returns all possible farm location values\nthat can be used when creating a new farm.\n\nReturns:\n    dict: List of all available farm locations","operationId":"get_farm_locations_api_farm_locations_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/investors/summary":{"get":{"tags":["INVESTORS"],"summary":"Get Summary","description":"Get a comprehensive performance summary for the logged-in investor.\n\nCalculates total buffaloes, calves, and current asset value based on animal age tiers.\nAlso returns the investor's profile details and member duration.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n\nReturns:\n    dict: success status and data containing profile_details, total_buffaloes,\n          total_calves, asset_value, and revenue\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not an Investor\n    HTTPException 404: If investor or user record is missing\n    HTTPException 500: For calculation or database errors\n\nAuthorization:\n    - INVESTOR ONLY.","operationId":"get_summary_api_investors_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/investors/animals":{"get":{"tags":["INVESTORS"],"summary":"Get Investor Animals","description":"Retrieve a list of all animals owned by the logged-in investor OR a specific investor (for Admin).\n\nProvides animal identification, images, current farm location, and health status.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    investor_id: Optional ID of the investor (Required for Admin/Manager)\n\nReturns:\n    dict: status, animal count, and list of animal data objects\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user role is unauthorized\n    HTTPException 404: If investor record is missing\n    HTTPException 500: For database or join errors\n\nAuthorization:\n    - INVESTOR (own animals)\n    - ADMIN, FARM_MANAGER, SUPERVISOR (specific investor's animals)","operationId":"get_investor_animals_api_investors_animals_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"investor_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Investor Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/investors/get_all_investors":{"get":{"tags":["INVESTORS"],"summary":"Get All Investors","description":"Retrieve a list of all registered investors in the system.\n\nAdmins and farm staff can use this to view investor profiles and their total invested amounts.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n\nReturns:\n    dict: Success status and list of investor profiles\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user role is not Admin, Farm Manager, or Supervisor\n    HTTPException 500: For data retrieval failures\n\nAuthorization:\n    - ADMIN, FARM_MANAGER, or SUPERVISOR.","operationId":"get_all_investors_api_investors_get_all_investors_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/leave_requests/create_leave_request":{"post":{"tags":["Leave_Requests"],"summary":"Create Leave Request","description":"Submit a new leave request for a supervisor.\n\nChecks for overlapping PENDING or APPROVED leave requests before creation.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    leave_request: LeaveRequestCreateRequest containing dates and type\n    \nReturns:\n    dict: Success status and the created leave request details\n    \nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not a Supervisor\n    HTTPException 409: If an overlapping leave request exists\n    HTTPException 500: For database errors\n    \nAuthorization:\n    - SUPERVISOR ONLY.","operationId":"create_leave_request_api_leave_requests_create_leave_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveRequestCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/leave_requests/leave-requests":{"get":{"tags":["Leave_Requests"],"summary":"Get Leave Requests","description":"Retrieve a list of leave requests submitted by the logged-in supervisor.\n\nAllows filtering by status (PENDING, APPROVED, REJECTED, CANCELLED).\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    status_filter: Optional filter by LeaveStatusEnum\n    \nReturns:\n    dict: List of leave request objects\n    \nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not a Supervisor\n    HTTPException 500: For retrieval errors\n    \nAuthorization:\n    - SUPERVISOR ONLY.","operationId":"get_leave_requests_api_leave_requests_leave_requests_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeaveStatusEnum"},{"type":"null"}],"description":"Filter by status","title":"Status Filter"},"description":"Filter by status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leave_requests/update_leave_status/{leave_id}":{"put":{"tags":["Leave_Requests"],"summary":"Approve Reject Supervisor Leave","description":"Approve or reject a supervisor's leave request.\n\nOnly Farm Managers can process leave requests for supervisors within their own farm.\nOnly PENDING requests can be processed.\n\nArgs:\n    leave_id: ID of the leave request to update\n    action_request: LeaveRequestActionRequest containing new status and optional rejection reason\n    db: Database session dependency\n    user: Current authenticated user information\n    \nReturns:\n    dict: Success message and the updated leave status details\n    \nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not a Farm Manager or supervisor is not in their farm\n    HTTPException 404: If manager, supervisor, or leave request is not found\n    HTTPException 400: If requesting status change for a non-PENDING request or missing rejection reason\n    HTTPException 500: For logic or database errors\n\nAuthorization:\n    - FARM_MANAGER ONLY.","operationId":"approve_reject_supervisor_leave_api_leave_requests_update_leave_status__leave_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"leave_id","in":"path","required":true,"schema":{"type":"integer","title":"Leave Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeaveRequestActionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leave_requests/leave-requests/{leave_id}":{"put":{"tags":["Leave_Requests"],"summary":"Cancel Leave Request","description":"Cancel an existing leave request by the supervisor who created it.\n\nOnly PENDING requests can be cancelled.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    leave_id: ID of the leave request to cancel\n    \nReturns:\n    dict: Success message with cancelled leave ID\n    \nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not a Supervisor\n    HTTPException 404: If leave request not found\n    HTTPException 400: If the request is not in PENDING status\n    HTTPException 500: For cancellation failures\n    \nAuthorization:\n    - SUPERVISOR ONLY.","operationId":"cancel_leave_request_api_leave_requests_leave_requests__leave_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"leave_id","in":"path","required":true,"schema":{"type":"integer","title":"Leave Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/milk/create_milk_entry":{"post":{"tags":["Milk"],"summary":"Create Milk Entry","description":"Create milk production entries for a date range.\n\nAllows supervisors to create milk entries for their assigned shed over a date range.\nSupports both shed-level entries (when animal_id is None) and buffalo-specific entries.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    milk_entry: MilkEntryCreateRequest containing start_date, end_date, timing, quantity, and optional animal_id\n\nReturns:\n    dict: Success status and list of created milk entry IDs\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not a Supervisor\n    HTTPException 404: If supervisor not linked to shed or animal not found\n    HTTPException 400: If animal doesn't belong to supervisor's shed\n    HTTPException 500: For database or server errors\n\nAuthorization:\n    - SUPERVISOR ONLY.","operationId":"create_milk_entry_api_milk_create_milk_entry_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MilkEntryCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/milk/milk_entries":{"get":{"tags":["Milk"],"summary":"Get All Milk Entries","description":"Retrieve all historical milk production entries.\n\nReturns a list of all entries ordered by date (descending), accessible by supervisors.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    \nReturns:\n    dict: Success status, count, and list of milk entry objects\n    \nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not a Supervisor\n    HTTPException 500: For retrieval failures\n    \nAuthorization:\n    - SUPERVISOR ONLY.","operationId":"get_all_milk_entries_api_milk_milk_entries_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/milk/get_milk_report":{"get":{"tags":["Milk"],"summary":"Get Milk Report","description":"Generate a milk production report for a specific date.\n\nSupports filtering by specific date and production timing (Morning/Evening).\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    report_date: The target date for the report\n    timing: Optional filter for Morning or Evening production\n    \nReturns:\n    dict: Success status, count of records found, and the report data list\n    \nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not a Farm Manager\n    HTTPException 500: For processing errors\n    \nAuthorization:\n    - FARM_MANAGER ONLY.","operationId":"get_milk_report_api_milk_get_milk_report_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"report_date","in":"query","required":true,"schema":{"type":"string","format":"date","description":"Date for milk report","title":"Report Date"},"description":"Date for milk report"},{"name":"timing","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/TimingEnum"},{"type":"null"}],"description":"MORNING / EVENING","title":"Timing"},"description":"MORNING / EVENING"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shed/create_shed":{"post":{"tags":["Sheds"],"summary":"Create Shed","description":"Create a new shed within a specific farm.\n\nEach farm is limited to a maximum of 12 sheds. The shed_id must be unique across all sheds.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    shed_request: ShedCreateRequest containing farm_id, shed_id, name, and capacity\n\nReturns:\n    dict: Success message and basic details of the newly created shed\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user is not an Admin\n    HTTPException 404: If the specified farm does not exist\n    HTTPException 400: If the farm already has 12 sheds or if shed_id is not unique\n    HTTPException 500: For unexpected server errors\n\nAuthorization:\n    - ADMIN ONLY.","operationId":"create_shed_api_shed_create_shed_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShedCreateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/shed/list":{"get":{"tags":["Sheds"],"summary":"List Sheds","description":"Retrieve a list of all sheds associated with a farm with full details.\n\nAdmins must provide a farm_id. Farm Managers and Supervisors see sheds linked to their assigned farm.\nIncludes capacity, animal count, available space, CCTV URLs, and supervisor information for each shed.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    farm_id: The ID of the farm to list sheds for (required for Admin, optional for FM/Supervisor)\n\nReturns:\n    dict: Success message, total shed count, and a list of detailed shed objects,\n          each containing supervisor info and availability metrics.\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user role is unauthorized\n    HTTPException 400: If farm_id is missing for Admin or doesn't match requester's farm\n    HTTPException 404: If manager or supervisor record is missing\n    HTTPException 500: For retrieval errors\n\nAuthorization:\n    - ADMIN: Any farm (must provide farm_id).\n    - FARM_MANAGER: Their assigned farm.\n    - SUPERVISOR: Their assigned farm.","operationId":"list_sheds_api_shed_list_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"farm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Farm Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shed/available_positions":{"get":{"tags":["Sheds"],"summary":"Get Available Positions In Shed","description":"Get a detailed map of filled and available parking positions within a specific shed.\n\nThe map covers 4 rows (R1-R4) with 75 positions each (total 300).\nIt also returns farm/shed details and the assigned supervisor's info.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    shed_id: The unique ID of the shed to map (required for Admin/FM, optional for Supervisor)\n\nReturns:\n    dict: Success message, shed/farm metadata, supervisor details, and row-wise position maps\n\nRaises:\n    HTTPException 401: If user is not authenticated\n    HTTPException 403: If user role is unauthorized or shed doesn't belong to their farm\n    HTTPException 400: If shed_id is missing for Admin/FM\n    HTTPException 404: If record (user role, shed, or farm) is not found\n    HTTPException 500: For mapping or database errors\n\nAuthorization:\n    - ADMIN: Any shed.\n    - FARM_MANAGER: Any shed in their farm.\n    - SUPERVISOR: Only their assigned shed.","operationId":"get_available_positions_in_shed_api_shed_available_positions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"shed_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","exclusiveMinimum":0},{"type":"null"}],"title":"Shed Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ticket/":{"post":{"tags":["Tickets"],"summary":"Create Ticket","description":"Create a new medical or transfer ticket for an animal.\n\nFor TRANSFER tickets, the endpoint handles IN/OUT directions and validates shed ownership.\nFor HEALTH tickets, it links to specific diseases and optional medical staff.","operationId":"create_ticket_api_ticket__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"ticket_type","in":"query","required":true,"schema":{"$ref":"#/components/schemas/TicketTypeEnum","description":"Type of ticket (HEALTH or TRANSFER)"},"description":"Type of ticket (HEALTH or TRANSFER)"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TicketCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ticket/get_health_tickets":{"get":{"tags":["Tickets"],"summary":"Get Health Tickets","operationId":"get_health_tickets_api_ticket_get_health_tickets_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"ticket_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/TicketTypeEnum"},{"type":"null"}],"title":"Ticket Type"}},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/StatusEnum"},{"type":"null"}],"title":"Status Filter"}},{"name":"transfer_direction","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/TransferDirectionEnum"},{"type":"null"}],"title":"Transfer Direction"}},{"name":"farm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by Farm ID (Admin only)","title":"Farm Id"},"description":"Filter by Farm ID (Admin only)"},{"name":"shed_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by Shed ID (Admin only)","title":"Shed Id"},"description":"Filter by Shed ID (Admin only)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/users/get_user_data":{"get":{"tags":["Users"],"summary":"Get User Data","description":"Retrieve comprehensive profile data for a specific user.\n\nIncludes basic profile information and associated operational data (farm, shed, or medical links)\nbased on the user's role. Non-admin users can only view their own profile.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    mobile: Mobile number of the user to fetch (optional, defaults to self)\n\nReturns:\n    dict: Success status and user object with role-specific operational metadata\n\nRaises:\n    HTTPException 403: If user tries to access a profile other than their own without Admin roles\n    HTTPException 404: If user is not found in the database\n    HTTPException 500: For unexpected server-side errors\n\nAuthorization:\n    - ADMIN: Any user profile.\n    - OTHER ROLES: Their own profile only.","operationId":"get_user_data_api_users_get_user_data_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"mobile","in":"query","required":false,"schema":{"type":"string","title":"Mobile"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/users/update_user_details/":{"put":{"tags":["Users"],"summary":"Update User Details","operationId":"update_user_details_api_users_update_user_details__put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/users/activate_deactivate_user/{mobile}":{"put":{"tags":["Users"],"summary":"Activate Deactivate User","description":"Update the active status of a user account.\n\nSets the `is_active` flag to the provided boolean value. Restricted to Admin users.\n\nArgs:\n    db: Database session dependency\n    user: Current authenticated user information\n    mobile: Mobile number of the user to update\n    is_active: The new status to set (True for activate, False for deactivate)\n\nReturns:\n    dict: Success status and user summary with updated active status\n\nRaises:\n    HTTPException 403: If requester is not an Admin\n    HTTPException 404: If user to update is not found\n    HTTPException 500: For update errors\n\nAuthorization:\n    - ADMIN ONLY.","operationId":"activate_deactivate_user_api_users_activate_deactivate_user__mobile__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"mobile","in":"path","required":true,"schema":{"type":"string","title":"Mobile"}},{"name":"is_active","in":"query","required":true,"schema":{"type":"boolean","title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/visits/book_visit_slot":{"post":{"tags":["Visits"],"summary":"Book Visit Slot","description":"Book a 30-minute exclusive farm visit slot for an investor.\n\n- **Access**: Strictly restricted to the **INVESTOR** role.\n- **Resolution**: Farm and Location details are automatically derived from the provided `farm_id`.\n- **Policy**: Each investor is allowed **one visit per month for each unique farm**.\n- **Exclusivity**: Only one investor group can book a specific farm for any given 30-minute slot.\n\nWorkflow:\n1. **Identity & Security**: Verifies authentication and the `INVESTOR` role.\n2. **Farm Lookup**: Resolves the farm and its geographical location using the `farm_id`.\n3. **Time Validation**: Ensures the requested slot is in the future (IST).\n4. **Investor Lookup**: Identifies the investor using the mobile number from the JWT token.\n5. **Policy Check**: Enforces the \"one visit per farm per month\" rule.\n6. **Exclusivity Check**: Ensures no other booking exists for the same farm at the requested time.\n7. **Confirmation**: Records the booking and returns comprehensive visit metadata.\n\nArgs:\n    db (db_dependency): Database session.\n    user (user_dependency): Current authenticated user.\n    booking_data (VisitBookingCreateRequest): contains farm_id, visit_date, and start_time.\n\nReturns:\n    dict: Success status, message, and confirmed booking details.\n\nRaises:\n    HTTPException:\n        - 401: If not authenticated or mobile missing in token.\n        - 403: If user lacks the INVESTOR role.\n        - 404: If farm, user, or investor records are not found.\n        - 400: If the slot is in the past, the monthly farm limit is reached, or the farm is already booked for this slot.\n        - 500: Internal processing errors.","operationId":"book_visit_slot_api_visits_book_visit_slot_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisitBookingCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/visits/available_visit_slots":{"get":{"tags":["Visits"],"summary":"Get Available Visit Slots","description":"Retrieve all time slots for a specific farm and date, showing availability.\n\n- **Access**: Restricted to authenticated users with the **INVESTOR** role.\n- **Capacity**: Only ONE visitor group allowed per 30-minute slot for the entire farm.\n- **Logic**: Returns all standard slots (09:00 - 13:30) and marks them as either \"AVAILABLE\" or \"FILLED\" based on farm exclusivity.\n\nArgs:\n    db (db_dependency): Database session.\n    user (user_dependency): Current authenticated user.\n    visit_date (date): The date to check for availability.\n    farm_id (int): The ID of the farm to check.\n\nReturns:\n    dict: Success status, message, and lists of available vs. filled slots.\n\nRaises:\n    HTTPException:\n        - 401: If not authenticated.\n        - 404: If the farm is not found.\n        - 500: Database or server errors.","operationId":"get_available_visit_slots_api_visits_available_visit_slots_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"visit_date","in":"query","required":true,"schema":{"type":"string","format":"date","title":"Visit Date"}},{"name":"farm_id","in":"query","required":true,"schema":{"type":"integer","title":"Farm Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/visits/my-visits":{"get":{"tags":["Visits"],"summary":"Get My Visits","description":"Retrieve all visit bookings made by the logged-in investor.\n\nHow it works:\n1. **Authentication**: Verifies that the request is made by an authenticated user.\n2. **Authorization**: Validates that the user has the `INVESTOR` role.\n3. **Mobile Extraction**: Securely fetches the mobile number from the JWT token.\n4. **History Retrieval**: Fetches all `InvestorSlotBooking` records associated with the user's mobile number, ordered by date (newest first).\n\nArgs:\n    db (db_dependency): Database session.\n    user (user_dependency): Current authenticated user.\n\nReturns:\n    list[dict]: A list of objects containing visit details such as date, time, farm, and shed information.\n\nRaises:\n    HTTPException:\n        - 401: If user is not authenticated or mobile is missing in token.\n        - 403: If the user does not have the INVESTOR role.\n        - 500: For any database or internal processing errors.","operationId":"get_my_visits_api_visits_my_visits_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/visits/visits/{visit_id}":{"post":{"tags":["Visits"],"summary":"Scan Visit Qr","description":"Scan QR code and update visit status to VISITED.\n\nThis endpoint is called when a QR code is scanned at the farm entrance.\nIt updates the visit status from 'BOOKED' to 'VISITED' to mark that the\ninvestor has actually arrived at the farm.\n\nArgs:\n    visit_id: The unique visit ID from the QR code (path parameter)\n    db: Database session\n    user: Current authenticated user (Farm Manager or Supervisor)\n\nReturns:\n    dict: Success message with updated visit details\n\nRaises:\n    HTTPException 401: If not authenticated\n    HTTPException 403: If user is not Farm Manager or Supervisor\n    HTTPException 404: If visit not found\n    HTTPException 400: If visit is already marked as visited or cancelled","operationId":"scan_visit_qr_api_visits_visits__visit_id__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"visit_id","in":"path","required":true,"schema":{"type":"string","title":"Visit Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/doctor/get_my_assistants":{"get":{"tags":["Doctor Dashboard"],"summary":"Get My Assistants","description":"Get list of assistant doctors assigned to the current senior doctor.","operationId":"get_my_assistants_api_doctor_get_my_assistants_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/doctor/assign_tickets":{"post":{"tags":["Doctor Dashboard"],"summary":"Assign Tickets","operationId":"assign_tickets_api_doctor_assign_tickets_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignTaskRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/doctor/update_treatment_details":{"post":{"tags":["Doctor Dashboard"],"summary":"Update Treatment Details","operationId":"update_treatment_details_api_doctor_update_treatment_details_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTreatmentDetailsRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"AnimalAllocation":{"properties":{"rfid_tag_number":{"type":"string","title":"Rfid Tag Number"},"row_number":{"type":"string","title":"Row Number"},"parking_id":{"type":"string","title":"Parking Id"}},"type":"object","required":["rfid_tag_number","row_number","parking_id"],"title":"AnimalAllocation"},"AnimalCreateRequest":{"properties":{"investor_details":{"$ref":"#/components/schemas/InvestorDetails"},"investment_details":{"$ref":"#/components/schemas/InvestmentDetails"},"animals":{"items":{"$ref":"#/components/schemas/SingleAnimalDetail"},"type":"array","title":"Animals"},"farm_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Farm Id"}},"type":"object","required":["investor_details","investment_details","animals"],"title":"AnimalCreateRequest","example":{"animals":[{"age_months":36,"animal_id":"BUFF-V-001","animal_type":"BUFFALO","breed_id":"MURRAH-001","breed_name":"Murrah Buffalo","ear_tag":"ET-9900","health_status":"HEALTHY","images":["url1","url2"],"neckband_id":"NB-8877","rfid_tag":"RFID-123456","status":"high_yield"},{"age_months":3,"animal_id":"CALF-001","animal_type":"CALF","health_status":"HEALTHY","parent_animal_id":"RFID-123456","rfid_tag":"RFID-C-001"},{"age_months":48,"animal_id":"BUFF-V-002","animal_type":"BUFFALO","breed_id":"MURRAH-001","ear_tag":"ET-9901","health_status":"HEALTHY","neckband_id":"NB-8878","rfid_tag":"RFID-123457","status":"high_yield"},{"age_months":2,"animal_id":"CALF-002","animal_type":"CALF","health_status":"HEALTHY","parent_animal_id":"RFID-123457","rfid_tag":"RFID-C-002"}],"farm_id":1,"investment_details":{"animalkart_order_id":"OD#1768829719059","bank_name":"HDFC Bank - PARK STREET","number_of_units":4,"order_date":"2026-01-19T13:35:19.059Z","payment_method":"BANK_TRANSFER","payment_verification_screenshot":"https://firebasestorage.googleapis.com/v0/b/app/o/payment_receipt.jpg","total_investment_amount":1400000,"unit_cost":350000,"utr_number":"HDFC123456ABCD"},"investor_details":{"email":"msrikrishna@gmail.com","full_name":"Sri Krishna","investor_id":"6305625580","kyc_details":{"aadhar_back_url":"https://firebasestorage.googleapis.com/v0/b/app/o/aadhar_back.jpg","aadhar_front_url":"https://firebasestorage.googleapis.com/v0/b/app/o/aadhar_front.jpg","aadhar_number":"412867484526","pan_card_url":"https://firebasestorage.googleapis.com/v0/b/app/o/pan_card.pdf"},"mobile":"6305625580"}}},"AnimalHealthStatusEnum":{"type":"string","enum":["HEALTHY","UNDER_OBSERVATION","SICK","RECOVERING","CHRONIC","CRITICAL","QUARANTINED"],"title":"AnimalHealthStatusEnum"},"AnimalTypeEnum":{"type":"string","enum":["BUFFALO","CALF"],"title":"AnimalTypeEnum"},"AssignTaskRequest":{"properties":{"ticket_id":{"type":"integer","title":"Ticket Id"},"assistant_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Assistant Id"}},"type":"object","required":["ticket_id"],"title":"AssignTaskRequest"},"Body_create_farm_api_farm_farm_post":{"properties":{"location":{"$ref":"#/components/schemas/FarmLocationEnum"},"farm_name":{"type":"string","maxLength":100,"minLength":3,"title":"Farm Name"},"is_test":{"type":"boolean","title":"Is Test","default":false}},"type":"object","required":["location","farm_name"],"title":"Body_create_farm_api_farm_farm_post"},"BuffaloDiseaseEnum":{"type":"string","enum":["ANESTRUS","REPEAT_BREEDING_SYNDROME","METRITIS","ENDOMETRITIS","RETAINED_PLACENTA","OVARIAN_CYSTS","ABORTION","MASTITIS","CLINICAL_MASTITIS","SUBCLINICAL_MASTITIS","TEAT_INJURY","UDDER_EDEMA","MILK_FEVER","KETOSIS","ACIDOSIS","MINERAL_DEFICIENCY","ANEMIA","FOOT_AND_MOUTH_DISEASE","HEMORRHAGIC_SEPTICEMIA","BLACK_QUARTER","BRUCELLOSIS","TUBERCULOSIS","JOHNES_DISEASE","INTERNAL_PARASITES","EXTERNAL_PARASITES","TRYPANOSOMIASIS","BLOAT","INDIGESTION","DIARRHEA","RUMEN_IMPACTION","FOOT_ROT","LAMINITIS","OVERGROWN_HOOVES","LAMENESS","FEVER","RESPIRATORY_INFECTION","HEAT_STRESS"],"title":"BuffaloDiseaseEnum"},"EmployeeCreateRequest":{"properties":{"first_name":{"type":"string","maxLength":50,"title":"First Name"},"last_name":{"type":"string","maxLength":50,"title":"Last Name"},"email":{"type":"string","format":"email","title":"Email"},"mobile":{"type":"string","title":"Mobile","description":"Indian mobile number (10 digits)"},"roles":{"items":{"$ref":"#/components/schemas/RoleEnum"},"type":"array","minItems":1,"title":"Roles"},"farm_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Farm Id","description":"Required for FARM_MANAGER / SUPERVISOR"},"shed_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Shed Id","description":"Required for SUPERVISOR, Optional for ASSISTANT_DOCTOR"},"senior_doctor_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Senior Doctor Id","description":"Provide this while creating assistant doctor"},"is_test":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Test","description":"Make is_test to true to add test user","default":false}},"type":"object","required":["first_name","last_name","email","mobile","roles"],"title":"EmployeeCreateRequest","example":{"email":"kalyanontipuli@markwave.ai","farm_id":10,"first_name":"Kalyan","is_test":false,"last_name":"Ontipuli","mobile":"9398662859","roles":["SUPERVISOR"],"senior_doctor_id":1,"shed_id":3}},"EmployeeUpdateRequest":{"properties":{"user_id":{"type":"integer","exclusiveMinimum":0.0,"title":"User Id","description":"User ID of the employee to update"},"role":{"$ref":"#/components/schemas/RoleEnum","description":"Role of the employee (FARM_MANAGER or SUPERVISOR)"},"farm_id":{"type":"integer","exclusiveMinimum":0.0,"title":"Farm Id","description":"Farm ID to assign the employee to"},"shed_id":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Shed Id","description":"Shed ID (required for SUPERVISOR)"}},"type":"object","required":["user_id","role","farm_id"],"title":"EmployeeUpdateRequest","example":{"farm_id":1,"role":"SUPERVISOR","shed_id":5,"user_id":123}},"FarmLocationEnum":{"type":"string","enum":["KURNOOL","NANDYAL","ADONI"],"title":"FarmLocationEnum"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InvestmentDetails":{"properties":{"animalkart_order_id":{"type":"string","title":"Animalkart Order Id"},"order_date":{"type":"string","format":"date-time","title":"Order Date"},"total_investment_amount":{"type":"integer","title":"Total Investment Amount"},"unit_cost":{"type":"integer","title":"Unit Cost"},"number_of_units":{"type":"integer","title":"Number Of Units"},"payment_method":{"type":"string","title":"Payment Method"},"bank_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bank Name"},"utr_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utr Number"},"payment_verification_screenshot":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Verification Screenshot"}},"type":"object","required":["animalkart_order_id","order_date","total_investment_amount","unit_cost","number_of_units","payment_method"],"title":"InvestmentDetails"},"InvestorDetails":{"properties":{"investor_id":{"type":"string","title":"Investor Id"},"full_name":{"type":"string","title":"Full Name"},"mobile":{"type":"string","title":"Mobile"},"email":{"type":"string","title":"Email"},"kyc_details":{"$ref":"#/components/schemas/KYCDetails"}},"type":"object","required":["investor_id","full_name","mobile","email","kyc_details"],"title":"InvestorDetails"},"KYCDetails":{"properties":{"aadhar_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Aadhar Number"},"aadhar_front_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Aadhar Front Url"},"aadhar_back_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Aadhar Back Url"},"pan_card_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pan Card Url"}},"type":"object","title":"KYCDetails"},"LeaveRequestActionRequest":{"properties":{"status":{"$ref":"#/components/schemas/LeaveStatusEnum"},"rejection_reason":{"anyOf":[{"type":"string","maxLength":500,"minLength":10},{"type":"null"}],"title":"Rejection Reason"}},"type":"object","required":["status"],"title":"LeaveRequestActionRequest","example":{"status":"APPROVED"}},"LeaveRequestCreateRequest":{"properties":{"leave_type":{"$ref":"#/components/schemas/LeaveTypeEnum"},"start_date":{"type":"string","format":"date","title":"Start Date"},"end_date":{"type":"string","format":"date","title":"End Date"},"reason":{"type":"string","maxLength":500,"minLength":10,"title":"Reason"}},"type":"object","required":["leave_type","start_date","end_date","reason"],"title":"LeaveRequestCreateRequest","example":{"end_date":"2026-01-27","leave_type":"CASUAL","reason":"Personal work and family commitments","start_date":"2026-01-25"}},"LeaveStatusEnum":{"type":"string","enum":["PENDING","APPROVED","REJECTED","CANCELLED"],"title":"LeaveStatusEnum"},"LeaveTypeEnum":{"type":"string","enum":["CASUAL","SICK","ANNUAL","MATERNITY","PATERNITY","UNPAID"],"title":"LeaveTypeEnum"},"MilkEntryCreateRequest":{"properties":{"start_date":{"type":"string","format":"date","title":"Start Date","description":"Start date for milk entries"},"end_date":{"type":"string","format":"date","title":"End Date","description":"End date for milk entries"},"timing":{"$ref":"#/components/schemas/TimingEnum","description":"Milk collection timing (MORNING / EVENING)"},"animal_id":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Animal Id","description":"Animal ID for buffalo-specific entry. Leave null for shed-level entry"},"quantity":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*(?:\\d{0,7}|(?=[\\d.]{1,10}0*$)\\d{0,7}\\.\\d{0,2}0*$)"}],"title":"Quantity","description":"Milk quantity in liters"}},"type":"object","required":["start_date","end_date","timing","quantity"],"title":"MilkEntryCreateRequest","description":"Request model for creating milk entries.\nSupports both shed-level and buffalo-level entries with date ranges.","example":{"end_date":"2026-01-25","quantity":145.75,"start_date":"2026-01-20","timing":"MORNING"}},"OTPTokenRequest":{"properties":{"mobile_number":{"type":"string","maxLength":15,"minLength":10,"title":"Mobile Number"},"otp":{"type":"string","maxLength":6,"minLength":6,"title":"Otp"}},"type":"object","required":["mobile_number","otp"],"title":"OTPTokenRequest","examples":[{"mobile_number":"9247534762","otp":"123456"}]},"PriorityEnum":{"type":"string","enum":["HIGH","MEDIUM","MIDIUM","LOW","CRITICAL"],"title":"PriorityEnum"},"RoleEnum":{"type":"string","enum":["INVESTOR","FARM_MANAGER","SUPERVISOR","DOCTOR","ASSISTANT_DOCTOR","ADMIN"],"title":"RoleEnum"},"ShedAllocationRequest":{"properties":{"allocations":{"items":{"$ref":"#/components/schemas/AnimalAllocation"},"type":"array","title":"Allocations"}},"type":"object","required":["allocations"],"title":"ShedAllocationRequest","example":{"allocations":[{"parking_id":"A1","rfid_tag_number":"RFID-123456","row_number":"R1"},{"parking_id":"B2","rfid_tag_number":"RFID-123457","row_number":"R2"}]}},"ShedCreateRequest":{"properties":{"farm_id":{"type":"integer","exclusiveMinimum":0.0,"title":"Farm Id"},"shed_name":{"type":"string","maxLength":100,"minLength":1,"title":"Shed Name"},"capacity":{"type":"integer","title":"Capacity","default":300},"cctv_url":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Cctv Url"}},"type":"object","required":["farm_id","shed_name"],"title":"ShedCreateRequest"},"SingleAnimalDetail":{"properties":{"animal_id":{"type":"string","title":"Animal Id"},"animal_type":{"$ref":"#/components/schemas/AnimalTypeEnum"},"breed_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Breed Id"},"breed_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Breed Name"},"rfid_tag":{"type":"string","title":"Rfid Tag","description":"Format: RFID-<numbers>"},"ear_tag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ear Tag"},"neckband_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Neckband Id"},"age_months":{"type":"integer","title":"Age Months"},"health_status":{"$ref":"#/components/schemas/AnimalHealthStatusEnum"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","description":"high_yield | low_yield | resting | expired"},"images":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Images"},"parent_animal_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Parent Animal Id"}},"type":"object","required":["animal_id","animal_type","rfid_tag","age_months","health_status"],"title":"SingleAnimalDetail"},"StatusEnum":{"type":"string","enum":["PENDING","IN_PROGRESS","APPROVED","RESOLVED","REJECTED"],"title":"StatusEnum"},"TicketCreateRequest":{"properties":{"animal_id":{"type":"string","title":"Animal Id"},"description":{"type":"string","title":"Description"},"disease":{"anyOf":[{"items":{"$ref":"#/components/schemas/BuffaloDiseaseEnum"},"type":"array"},{"type":"null"}],"title":"Disease"},"transfer_direction":{"anyOf":[{"$ref":"#/components/schemas/TransferDirectionEnum"},{"type":"null"}]},"source_shed_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Source Shed Id"},"destination_shed_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Destination Shed Id"},"row_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Row Number"},"images":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Images"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"priority":{"anyOf":[{"$ref":"#/components/schemas/PriorityEnum"},{"type":"null"}],"default":"MEDIUM"}},"type":"object","required":["animal_id","description"],"title":"TicketCreateRequest","examples":[{"animal_id":"RFID-101","description":"Buffalo showing signs of fever and reduced milk yield","disease":["FEVER","RESPIRATORY_INFECTION"],"priority":"HIGH"},{"animal_id":"102","description":"Buffalo needs isolation due to contagious condition","priority":"","transfer_direction":"OUT"}]},"TicketTypeEnum":{"type":"string","enum":["HEALTH","TRANSFER","VACCINATION"],"title":"TicketTypeEnum"},"TimingEnum":{"type":"string","enum":["MORNING","EVENING"],"title":"TimingEnum"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"},"roles":{"items":{"$ref":"#/components/schemas/RoleEnum"},"type":"array","title":"Roles"}},"type":"object","required":["access_token","token_type","roles"],"title":"Token","description":"Pydantic model for authentication tokens returned to the client."},"TransferDirectionEnum":{"type":"string","enum":["OUT","IN"],"title":"TransferDirectionEnum"},"UpdateTreatmentDetailsRequest":{"properties":{"ticket_id":{"type":"integer","title":"Ticket Id"},"disease":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Disease"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["ticket_id"],"title":"UpdateTreatmentDetailsRequest"},"UpdateUserRequest":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"profile":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Profile"}},"type":"object","title":"UpdateUserRequest","example":{"address":"Hyderabad, Telangana","email":"msrikrishna@gmail.com","name":"Sri Krishna","profile":"https://firebasestorage.googleapis.com/v0/b/app/o/profile.jpg"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VisitBookingCreateRequest":{"properties":{"farm_id":{"type":"integer","title":"Farm Id","description":"ID of the farm to visit"},"start_time":{"type":"string","format":"time","title":"Start Time","description":"Start time of the visit (HH:MM format)"},"visit_date":{"type":"string","format":"date","title":"Visit Date","description":"Date of the visit (YYYY-MM-DD format)"}},"type":"object","required":["farm_id","start_time","visit_date"],"title":"VisitBookingCreateRequest","example":{"farm_id":1,"start_time":"10:30","visit_date":"2026-03-15"}}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"Authorization"},"HTTPBearer":{"type":"http","scheme":"bearer"}}}}